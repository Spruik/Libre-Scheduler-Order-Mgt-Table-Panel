{"version":3,"sources":["../src/utils.js"],"names":["getLineStartTime","line","appEvents","hostname","window","location","postgRestHost","influxHost","post","url","Promise","resolve","reject","xhr","XMLHttpRequest","open","onreadystatechange","handleResponse","onerror","e","send","readyState","status","res","JSON","parse","responseText","statusText","get","alert","type","title","msg","emit","distinctElems","Array","from","Set","list","reconstruct","data","length","cols","columns","rows","result","forEach","row","obj","col","k","text","push"],"mappings":"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","file":"utils.js","sourcesContent":["import { appEvents } from 'app/core/core'\n\nconst hostname = window.location.hostname\nexport const postgRestHost = 'http://' + hostname + ':5436/'\nexport const influxHost = 'http://' + hostname + ':8086/'\n\nexport let post = (url, line) => {\n    return new Promise((resolve, reject) => {\n      var xhr = new XMLHttpRequest()\n      xhr.open('POST', url)\n      xhr.onreadystatechange = handleResponse\n      xhr.onerror = e => reject(e)\n      xhr.send(line)\n  \n      function handleResponse () {\n        if (xhr.readyState === 4) {\n          if (xhr.status === 200) {\n            // console.log('200');\n            var res = JSON.parse(xhr.responseText)\n            resolve(res)\n          } else if (xhr.status === 204) {\n            // console.log('204');\n            res = xhr.responseText\n            resolve(res)\n          } else {\n            reject(this.statusText)\n          }\n        }\n      }\n    })\n  }\n\nexport let get = url => {\n  return new Promise((resolve, reject) => {\n      var xhr = new XMLHttpRequest()\n      xhr.open('GET', url)\n      xhr.onreadystatechange = handleResponse\n      xhr.onerror = e => reject(e)\n      xhr.send()\n\n      function handleResponse () {\n      if (xhr.readyState === 4) {\n          if (xhr.status === 200) {\n          var res = JSON.parse(xhr.responseText)\n          resolve(res)\n          } else {\n          reject(this.statusText)\n          }\n      }\n      }\n  })\n}\n\n/**\n * pass in the line, return the line's default start time\n * @param {*} line \n */\nexport function getLineStartTime(line){\n  return '6:00:00'\n}\n\nexport const alert = (type, title, msg) => {\n  appEvents.emit('alert-' + type, [title, msg])\n}\n\nexport const distinctElems = list => {\n  return Array.from(new Set(list))\n}\n\nexport const reconstruct = data => {\n\n  if (data.length === 0) {\n    return data\n  }\n\n  const cols = data[0].columns\n  const rows = data[0].rows\n\n  let result = []\n  rows.forEach((row) => {\n    let obj = {}\n    cols.forEach((col, k) => {\n      obj[col.text] = row[k]\n    })\n    result.push(obj)\n  });\n  \n  return result\n}"]}